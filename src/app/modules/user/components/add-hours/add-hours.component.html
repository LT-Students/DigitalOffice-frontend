<mat-card class="add-hours card_grid">
	<div class="add-hours__header">
		<h3 doText underlined underlinedSize="sm">
			Внести часы за <a doText color="accent_color" (click)='picker.open()'>8 - 14 марта <mat-icon>expand_more</mat-icon></a>
		</h3>
        <mat-form-field appearance="none">
            <mat-date-range-input [dateFilter]="disableWeekends" [rangePicker]="picker">
                <input
                    (dateChange)="onDateInput($event.value, true)"
                    [value]="startDate"
                    matStartDate
                />
                <input
                    (dateChange)="onDateInput($event.value, false)"
                    [value]="endDate"
                    matEndDate
                />
            </mat-date-range-input>
            <mat-date-range-picker #picker (closed)="onClose()"></mat-date-range-picker>
        </mat-form-field>
	</div>
	<form [formGroup]="addHoursForm" (ngSubmit)="onSubmit()" autocomplete="off" class="add-hours__form">
		<div formGroupName="time" class="add-hours__row">
			<mat-form-field class="add-hours__time" appearance="fill">
				<input matInput formControlName="hours" type="text" maxlength="3" />
				<mat-icon matSuffix aria-label="time">schedule</mat-icon>
				<mat-error *ngIf="addHoursForm.get('time').invalid">{{ getTimePeriodErrorMessage() }}</mat-error>
			</mat-form-field>
			<mat-form-field appearance="fill">
				<mat-label>Куда</mat-label>
				<mat-select>
					<mat-option *ngFor="let category of categories" [value]="category">
						{{ category.name }}
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>

		<div class="add-hours__row" *ngIf="chosenCategory.name === 'Проект'">
			<mat-form-field appearance="fill">
				<mat-label>{{ chosenCategory.name }}</mat-label>
				<mat-select id="project" formControlName="project" [value]="options[0]">
					<mat-option *ngFor="let option of options" [value]="option.id">
						{{ option.name }}
					</mat-option>
				</mat-select>
			</mat-form-field>
			<mat-form-field appearance="fill">
				<mat-label>Тег</mat-label>
				<mat-select id="tag" formControlName="tag" [value]="options[0]">
					<mat-option *ngFor="let option of options" [value]="option.id">
						{{ option.name }}
					</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<mat-form-field appearance="fill">
			<mat-label>Комментарий</mat-label>
			<textarea id="description" matInput formControlName="description" placeholder="Оставьте комментарий по выполненной задаче"></textarea>
		</mat-form-field>
		<button mat-flat-button color="primary" [disabled]="addHoursForm.invalid">Добавить часы</button>
	</form>
</mat-card>
