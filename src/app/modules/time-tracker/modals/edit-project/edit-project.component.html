<div class="modal">
	<h3 class="modal__title">
		Редактирование часов за проект
		<span class="text-accent_controls_default">
			{{ project.name }}
		</span>
	</h3>
	<form class="content" [formGroup]="editForm" (ngSubmit)="onSubmitClick()">
		<div class="flex flex_ai_end">
			<do-form-row class="modal__hours" label="Количество часов">
				<mat-form-field>
					<input matInput formControlName="userHours" type="text" placeholder="0" />
					<mat-error *ngIf="editForm.controls['userHours']?.errors?.min; else errIntNum">
						Минимальное значение должно быть больше 0
					</mat-error>
					<ng-template #errIntNum>
						<mat-error *ngIf="editForm.controls['userHours']?.errors?.intNum; else errMax">
							Значение может быть только целым числом
						</mat-error>
					</ng-template>
					<ng-template #errMax>
						<mat-error *ngIf="editForm.controls['userHours']?.errors?.max; else errRequired">
							Превышено максимальное значение
						</mat-error>
					</ng-template>
					<ng-template #errRequired>
						<mat-error *ngIf="editForm.controls['userHours']?.errors?.required">
							Поле не может быть пустым
						</mat-error>
					</ng-template>
				</mat-form-field>
			</do-form-row>
			<span class="mat-h3">&nbsp;за {{ projectDate | date: 'LLLL YYYY' }}</span>
		</div>
		<do-form-row label="Комментарий">
			<mat-form-field>
				<textarea
					#comment
					cdkTextareaAutosize
					cdkAutosizeMinRows="3"
					cdkAutosizeMaxRows="3"
					matInput
					formControlName="description"
					maxlength="500"
					placeholder="Оставьте комментарий для менеджера"
				></textarea>
				<mat-hint>{{ comment.value.length }}/500</mat-hint>
			</mat-form-field>
		</do-form-row>
		<div class="controls">
			<button mat-button type="button" class="controls__button" (click)="onClose()">Отмена</button>
			<button
				mat-flat-button
				color="primary"
				type="submit"
				class="controls__button"
				[loading]="(loading | async) ?? false"
				[disabled]="editForm.invalid"
			>
				Сохранить
			</button>
		</div>
	</form>
</div>
