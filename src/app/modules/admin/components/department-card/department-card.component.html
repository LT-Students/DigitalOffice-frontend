<div class="navigation">
	<a class="navigation__link" routerLink="/admin/dashboard">Администрирование</a>
	<span>
		<mat-icon>chevron_right</mat-icon>
	</span>
	<a class="navigation__link" routerLink="/departments">Список департаментов</a>
	<span>
		<mat-icon>chevron_right</mat-icon>
	</span>
	<a class="navigation__link">{{ departmentInfo?.name }}</a>
</div>
<h1 class="title">{{ departmentInfo?.name }}</h1>
<mat-card class="card card_standard department">
	<div class="department__info">
        <div class='department__info__header'>
            <h3 doUnderline underlinedSize="sm">Общая информация</h3>
            <button mat-flat-button>
                <div doText color="gray1" (click)="onEditDepartamentClick(departmentInfo)">
                    <img src='assets/svg/edit.svg' alt=''>
                    Редактировать
                </div>
            </button>
        </div>
		<div class="department__label">
			<p>Директор</p>
			<ng-container *ngIf="departmentInfo?.director; else empty">
				<p>{{ departmentInfo?.director?.firstName }} {{ departmentInfo?.director?.lastName }}</p>
			</ng-container>
		</div>
		<div class="department__label">
			<p>Описание</p>
			<ng-container *ngIf="departmentInfo?.description; else empty">
				<p>{{ departmentInfo?.description }}</p>
			</ng-container>
		</div>
	</div>
	<div class="department__table table">
		<div class="table__header">
			<h3 doUnderline underlinedSize="sm">
				Сотрудники <span class="mat-h3 primary">{{ totalCount | i18nPlural: peopleCountMap }}</span>
			</h3>
			<button mat-flat-button color="accent" (click)="onAddEmployeeClick()">+ Добавить сотрудника</button>
		</div>
		<table class="table__content" matSort (matSortChange)="sortData($event)">
			<colgroup>
				<col class="table__column table__column_width_little" />
			</colgroup>
			<tr>
				<th></th>
				<th mat-sort-header="name">Имя</th>
				<th mat-sort-header="role">Роль</th>
				<th mat-sort-header="rate">Ставка</th>
				<th mat-sort-header="status">Статус</th>
			</tr>
			<ng-container *ngFor="let userInfo of sortedUsersInfo">
				<tr class="table__row" (click)="onUserClick(userInfo.id)">
					<td>
						<do-profile-image [image]="userInfo?.avatar"></do-profile-image>
					</td>
					<td>
						<p>{{ userInfo.firstName }} {{ userInfo.lastName }}</p>
						<p>{{ userInfo?.position?.name }}</p>
					</td>
					<td>
						<ng-container *ngIf="userInfo?.role?.name; else empty">
							{{ userInfo?.role?.name }}
						</ng-container>
					</td>
					<td>
						<ng-container *ngIf="userInfo?.rate; else empty">
							{{ userInfo.rate }}
						</ng-container>
					</td>
					<td>
						<ng-container *ngIf="userInfo?.isActive; else archived">
							<p class="user-status">Активен</p>
						</ng-container>
						<ng-template #archived>
							<p class="user-status user-status_archived">В архиве</p>
						</ng-template>
					</td>
				</tr>
			</ng-container>
		</table>
		<mat-paginator [length]="totalCount" [pageSize]="pageSize" [pageSizeOptions]="[10, 25, 50]" (page)="onPageChange($event)"></mat-paginator>
	</div>
</mat-card>

<ng-template #empty>
	<p>—</p>
</ng-template>
