<do-breadcrumbs [paths]="[{title: 'Администрирование', url: 'admin/dashboard'}, {title: 'Новый проект'}]"></do-breadcrumbs>
<h1>Новый проект</h1>
<mat-card class="card">
	<form class="project-info" [formGroup]="projectForm" (ngSubmit)="createProject()" autocomplete="off">
		<div class="project-info__section">
			<div class="section__title">
				<div class="section__title_left">
					<h3 doUnderline underlinedSize="sm">Общая информация</h3>
				</div>
				<div class="section__title_right">
					<span class="project-info__title warn">* Обязательное поле</span>
				</div>
			</div>
			<div class="section__content section__content_general">
				<div class="project-info__name">
					<mat-form-field appearance="fill">
						<mat-label>Название проекта</mat-label>
						<input matInput type="text" id="name" formControlName="name" placeholder="Введите название проекта" required />
					</mat-form-field>
				</div>
				<div class="project-info__department">
					<mat-form-field appearance="fill">
						<mat-label>Департамент</mat-label>
						<mat-select id="department" formControlName="departmentId" placeholder="Выберите департамент" required>
							<mat-option *ngFor="let department of departments" [value]="department.id">
								{{ department.name }}
							</mat-option>
						</mat-select>
					</mat-form-field>
				</div>
				<div class="project-info__customer">
					<mat-form-field appearance="fill">
						<mat-label>Заказчик</mat-label>
						<input matInput type="text" id="customer" placeholder="Введите данные заказчика" />
					</mat-form-field>
				</div>
				<!--<div class='project-info__date'>
          <do-datepicker
              controlName="date"
              label="Дата запуска"
              format='full'
              [isEdit]='true'
          ></do-datepicker>
        </div>-->
				<div class="project-info__status">
					<mat-form-field appearance="fill">
						<mat-label>Статус</mat-label>
						<mat-select id="status" formControlName="status">
							<mat-option *ngFor="let status of statuses" [value]="status.type">
								{{ status.name | titlecase }}
							</mat-option>
						</mat-select>
					</mat-form-field>
				</div>
				<div class="project-info__description">
					<mat-form-field appearance="fill">
						<mat-label>Описание</mat-label>
						<textarea matInput id="description" formControlName="description" placeholder="Кратко дайте описание проекту"></textarea>
					</mat-form-field>
				</div>
			</div>
		</div>

		<!--		<div class="project-info__section">-->
		<!--			<div class="section__title">-->
		<!--				<div class="section__title_left">-->
		<!--					<h3 doText underlined underlinedSize="sm">Участие</h3>-->
		<!--				</div>-->
		<!--			</div>-->
		<!--			<div class="section__content">-->
		<!--				<mat-checkbox class="checkbox">Включить меня в команду Product Менеджеров</mat-checkbox>-->
		<!--			</div>-->
		<!--		</div>-->

		<div class="project-info__section">
			<div class="section__title">
				<div class="section__title_left">
					<h3 doUnderline underlinedSize="sm">Команда</h3>
					&nbsp;
					<h3 class='primary'>{{ membersAll.length | i18nPlural: pluralTeamCount }}</h3>
				</div>
				<!--				<div class="section__title_right">-->
				<!--					<button mat-flat-button color="primary" type="button" (click)="showProjectTeam()">Посмотреть всю команду</button>-->
				<!--				</div>-->
			</div>
			<div class="section__content">
				<!--				<do-team-card *ngFor="let team of teams" [teamCard]="team" [users]="teams"></do-team-card>-->
				<div class="user-row" *ngFor="let member of membersAll">
					<div class="user-row__image">
						<do-profile-image [image]="member.avatar"></do-profile-image>
					</div>
					<div class="user-row__general-info">
						<div class="name">{{ member.firstName }} {{ member.lastName }}</div>
						<div class="position">{{ member.position?.name }}</div>
					</div>
					<div>{{ member.department?.name }}</div>
					<!--					<div class="user-row__projects-count"><span>1 проект</span></div>-->
					<!--                    <div class="user-row__lead" *ngIf="data.mode">-->
					<!--                        &lt;!&ndash; TODO: Сделать оотображение стилей кнопки для просмотра / редактирования&ndash;&gt;-->
					<!--                        <span class="label_lead" [ngClass]="{ label_lead_l: !member.lead }" (click)="assignLead(member)"-->
					<!--                        >Лидер направления</span-->
					<!--                        >-->
					<!--                    </div>-->
				</div>
				<button mat-flat-button color="accent" type="button" (click)="onAddTeamClick()">Добавить сотрудников</button>
			</div>
		</div>

		<div class="project-info__actions">
			<button mat-stroked-button color="warn" class="border-accent_color_bright" type="button" (click)="goBack()">Отмена</button>
			<button mat-flat-button color="primary" [disabled]="projectForm.invalid" type="submit">Создать проект</button>
		</div>
	</form>
</mat-card>
