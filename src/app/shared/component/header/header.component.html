<nav class="header" mat-tab-nav-bar>
	<ng-container *ngIf="currentUser$ | async as currentUser">
		<div class="header__menu-button">
			<button mat-icon-button (click)="onMenuClick($event)">
				<mat-icon>menu</mat-icon>
			</button>
		</div>

		<h4
			mat-tab-link
			class="logo"
			[routerLink]="[AppRoutes.Users, currentUser?.id]"
			routerLinkActive="active"
			[routerLinkActiveOptions]="{ exact: true }"
		>
			{{ portalName | async }}
		</h4>
		<a
			mat-tab-link
			[routerLink]="AppRoutes.TimeTrack"
			routerLinkActive="active"
			[routerLinkActiveOptions]="{ exact: true }"
			>Учет времени</a
		>
		<a
			mat-tab-link
			[routerLink]="AppRoutes.Projects"
			routerLinkActive="active"
			[routerLinkActiveOptions]="{ exact: true }"
			>Доска проектов</a
		>
		<a
			mat-tab-link
			[routerLink]="AppRoutes.News"
			routerLinkActive="active"
			[routerLinkActiveOptions]="{ exact: true }"
			>Новости</a
		>
		<a
			*ngIf="currentUser?.isAdmin"
			mat-tab-link
			[routerLink]="AppRoutes.Admin"
			routerLinkActive="active"
			[routerLinkActiveOptions]="{ exact: true }"
			>Администрирование</a
		>
		<span class="spacer"></span>

		<div class="avatar" [matMenuTriggerFor]="menu">
			<do-profile-image [image]="currentUser?.avatar" size="s"></do-profile-image>
			<p class="avatar__greeting">
				Привет, <strong>{{ currentUser?.firstName }}</strong>
			</p>
		</div>

		<mat-menu #menu="matMenu" xPosition="before">
			<button mat-menu-item [routerLink]="[AppRoutes.Users, currentUser?.id]">Карточка сотрудника</button>
			<button mat-menu-item (click)="onChangePasswordClick()">Сменить пароль</button>
			<button mat-menu-item (click)="onLogoutClick()">Выход</button>
		</mat-menu>
	</ng-container>
</nav>
<ngx-loading-bar [includeSpinner]="false" [fixed]="false" color="#FF8F65"></ngx-loading-bar>
