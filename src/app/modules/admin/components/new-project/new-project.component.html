<do-breadcrumbs [paths]="[{ title: 'Администрирование', url: 'admin/dashboard' }, { title: 'Новый проект' }]">
</do-breadcrumbs>
<h1>Новый проект</h1>
<mat-card class="card">
	<form class="project-info" [formGroup]="projectForm" (ngSubmit)="createProject()" autocomplete="off">
		<div class="project-info__section">
			<div class="section__title">
				<div class="section__title_left">
					<h3 doUnderline underlinedSize="sm">Общая информация</h3>
				</div>
				<div class="section__title_right">
					<span class="project-info__title warn">* Обязательное поле</span>
				</div>
			</div>
			<div class="section__content section__content_general">
				<mat-form-field appearance="fill">
					<mat-label>Название проекта</mat-label>
					<input
						matInput
						type="text"
						formControlName="name"
						placeholder="Введите название проекта"
						maxlength="150"
						required
					/>
				</mat-form-field>
				<mat-form-field appearance="fill">
					<mat-label>Департамент</mat-label>
					<mat-select formControlName="departmentId" placeholder="Выберите департамент" required>
						<mat-option *ngFor="let department of departments" [value]="department.id">
							{{ department.name }}
						</mat-option>
					</mat-select>
				</mat-form-field>
				<mat-form-field appearance="fill">
					<mat-label>Короткое описание</mat-label>
					<input
						matInput
						type="text"
						formControlName="shortDescription"
						maxlength="100"
						placeholder="Короткое описание"
					/>
				</mat-form-field>
				<mat-form-field appearance="fill">
					<mat-label>Статус</mat-label>
					<mat-select formControlName="status">
						<mat-option *ngFor="let status of statuses" [value]="status.type">
							{{ status.type | projectType | titlecase }}
						</mat-option>
					</mat-select>
				</mat-form-field>
				<mat-form-field class="project-info__description" appearance="fill">
					<mat-label>Описание</mat-label>
					<textarea
						matInput
						formControlName="description"
						placeholder="Дайте описание проекту"
						maxlength="300"
					></textarea>
				</mat-form-field>
			</div>
		</div>

		<div class="project-info__section">
			<div class="section__title">
				<div class="section__title_left">
					<h3 doUnderline underlinedSize="sm">Команда</h3>
					&nbsp;
					<h3 class="primary">{{ membersAll.length | i18nPlural: pluralTeamCount }}</h3>
				</div>
				<!--				<div class="section__title_right">-->
				<!--					<button mat-flat-button color="primary" type="button" (click)="showProjectTeam()">Посмотреть всю команду</button>-->
				<!--				</div>-->
			</div>
			<div class="section__content">
				<!--				<do-team-card *ngFor="let team of teams" [teamCard]="team" [users]="teams"></do-team-card>-->
				<div class="user-row" *ngFor="let member of membersAll">
					<div class="user-row__image">
						<do-profile-image [image]="member.avatar"></do-profile-image>
					</div>
					<div class="user-row__general-info">
						<div class="name">{{ member.firstName }} {{ member.lastName }}</div>
						<div class="position">{{ member.position?.name }}</div>
					</div>
					<div>{{ member.department?.name }}</div>
				</div>
				<button mat-flat-button color="accent" type="button" (click)="openAddEmployeeModal()">
					Добавить сотрудников
				</button>
			</div>
		</div>

		<div class="project-info__actions">
			<button mat-stroked-button color="warn" class="border-accent_color_bright" type="button" (click)="goBack()">
				Отмена
			</button>
			<button
				mat-flat-button
				color="primary"
				[loading]="(loading$$ | async) ?? false"
				[disabled]="projectForm.invalid"
				type="submit"
			>
				Создать проект
			</button>
		</div>
	</form>
</mat-card>
