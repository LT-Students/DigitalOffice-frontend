<div class="new-employee-container">
  <div class="content-container">
    <a class="nav-link regular_text" routerLink="/admin/dashboard">
      <img src="assets/svg/vector-arrow-back.svg" alt="back">
      К дашборду
    </a>
    <span class="title h1 h1_dark_2">Новый сотрудник</span>
    <div class="form-container">
      <form
        [formGroup]="userForm"
        (ngSubmit)="createEmployee()"
        autocomplete="off"
        class="data-form"
      >
        <h2 class="data-form__title h3 h3_dark_1">1. Основная информация</h2>
        <div class="main-info">
          <div class="content__photo">
            <div class="photo-container">
              <label for="choose-avatar">
                <img
                  [src]="
                    imgURL
                      ? imgURL
                      : '/assets/admin/new-employee/empty-photo-icon.png'
                  "
                  [ngClass]="imgURL ? 'filled_avatar' : 'empty_avatar'"
                  alt="empty-photo-icon"
                />
              </label>
              <input
                type="file"
                id="choose-avatar"
                accept="image/jpeg,image/png"
                #file
                (change)="preview(file.files)"
              />
              <span class="text-negative_accent regular_text" *ngIf="message">{{
                message
              }}</span>
            </div>
          </div>
          <div class="content__inputs">
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="lastName">Фамилия</label>
              <mat-form-field>
                <input
                  matInput
                  type="text"
                  id="lastName"
                  formControlName="lastName"
                />
                <mat-error
                  *ngIf="
                    userForm.controls['lastName'].dirty &&
                    userForm.controls['lastName'].hasError('required')
                  "
                >
                  Enter the last name
                </mat-error>
                <mat-error
                  *ngIf="
                    userForm.controls['lastName'].dirty &&
                    userForm.controls['lastName'].hasError('maxlength')
                  "
                >
                  The last name is too long
                </mat-error>
              </mat-form-field>
            </div>
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="firstName">Имя</label>
              <mat-form-field>
                <input
                  matInput
                  type="text"
                  id="firstName"
                  formControlName="firstName"
                />
                <mat-error
                  *ngIf="
                    userForm.controls['firstName'].dirty &&
                    userForm.controls['firstName'].hasError('required')
                  "
                >
                  Enter the first name
                </mat-error>
                <mat-error
                  *ngIf="
                    userForm.controls['firstName'].dirty &&
                    userForm.controls['firstName'].hasError('maxlength')
                  "
                >
                  The first name is too long
                </mat-error>
              </mat-form-field>
            </div>
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="middleName">Отчество</label>
              <mat-form-field>
                <input
                  matInput
                  type="text"
                  id="middleName"
                  formControlName="middleName"
                />
                <mat-error
                  *ngIf="
                    userForm.controls['middleName'].dirty &&
                    userForm.controls['middleName'].hasError('required')
                  "
                >
                  Enter the middle name
                </mat-error>
                <mat-error
                  *ngIf="
                    userForm.controls['middleName'].dirty &&
                    userForm.controls['middleName'].hasError('maxlength')
                  "
                >
                  The middle name is too long
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
        <h2 class="data-form__title h3 h3_dark_1">2. Рабочая информация</h2>
        <div class="job-info">
          <div class="position-info">
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="position">Позиция</label>
              <mat-form-field
                class="mat-form-field_default-select"
                appearance="none"
              >
                <mat-select id="position" formControlName="position">
                  <mat-option
                    *ngFor="let position of positions"
                    [value]="position.info.id"
                  >
                    {{ position.info.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="rate">Ставка</label>
              <mat-form-field
                class="mat-form-field_default-select"
                appearance="none"
              >
                <mat-select id="rate" formControlName="rate">
                  <mat-option *ngFor="let rate of rates" [value]="rate">
                    {{ rate }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="department-info">
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="department">Департамент</label>
              <mat-form-field
                class="mat-form-field_default-select"
                appearance="none"
              >
                <mat-select id="department" formControlName="department">
                  <mat-option
                    *ngFor="let department of departments"
                    [value]="department.name"
                  >
                    {{ department.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
        <h2 class="data-form__title h3 h3_dark_1">3. Данные для входа</h2>
        <div class="login-info">
          <div class="content__inputs">
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="email">Почта</label>
              <mat-form-field>
                <input
                  matInput
                  type="email"
                  id="email"
                  formControlName="email"
                />
                <mat-error
                  *ngIf="
                    userForm.controls['email'].dirty &&
                    userForm.controls['email'].hasError('required')
                  "
                >
                  Enter the email
                </mat-error>
                <mat-error
                  *ngIf="
                    userForm.controls['email'].dirty &&
                    userForm.controls['email'].hasError('email')
                  "
                >
                  The email is invalid
                </mat-error>
              </mat-form-field>
            </div>
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="login">Логин</label>
              <mat-form-field>
                <input
                  matInput
                  type="text"
                  id="login"
                  formControlName="login"
                />
                <mat-error
                  *ngIf="
                    userForm.controls['login'].dirty &&
                    userForm.controls['login'].hasError('required')
                  "
                >
                  Enter the login
                </mat-error>
                <mat-error
                  *ngIf="
                    userForm.controls['login'].dirty &&
                    userForm.controls['login'].hasError('minlength')
                  "
                >
                  The login is too short
                </mat-error>
                <mat-error
                  *ngIf="
                    userForm.controls['login'].dirty &&
                    userForm.controls['login'].hasError('maxlength')
                  "
                >
                  The login is too long
                </mat-error>
              </mat-form-field>
            </div>
            <div class="data-form__input-content">
              <label class="h5 h5_dark_1" for="password">Пароль</label>
              <mat-form-field>
                <input
                  matInput
                  type="password"
                  id="password"
                  formControlName="password"
                />
                <mat-error
                  *ngIf="
                    userForm.controls['password'].dirty &&
                    userForm.controls['password'].hasError('required')
                  "
                >
                  Enter the password
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="buttons">
          <button
            mat-flat-button
            class="btn-generate-credentials"
            type="button"
            (click)="generateCredentials()"
          >
            <img
              src="/assets/admin/new-employee/lock-icon.png"
              alt="lock-icon"
            />
            <span class="regular_text regular_text_accent_color_bright"
              >Сгенерировать пароль</span
            >
          </button>
          <button
            mat-flat-button
            color="primary"
            class="btn-create-employee"
            type="submit"
            (click)="createEmployee()"
            [disabled]="userForm.invalid"
          >
            <span class="regular_text regular_text_light_1"
              >Создать сотрудника</span
            >
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
