<h3 class="title">Смена пароля</h3>
<form class="form" [formGroup]="form" (ngSubmit)="changePassword()">
	<span *ngIf="form.errors?.['noMatch']" class="mat-body-2 text-alert hint">Пароли не совпадают :(</span>
	<do-form-field label="Введи старый пароль">
		<mat-form-field>
			<do-password formControlName="oldPassword" placeholder="Старый пароль"></do-password>
			<mat-error>{{ form.controls['oldPassword'].errors | controlErrors }}</mat-error>
		</mat-form-field>
	</do-form-field>
	<do-form-field label="Придумай новый пароль">
		<mat-form-field
			#trigger="mdePopoverTrigger"
			[mdePopoverTriggerFor]="popover"
			mdePopoverTriggerOn="none"
			mdePopoverPositionX="before"
			[mdePopoverOffsetX]="270"
			[mdePopoverOffsetY]="-70"
		>
			<do-password
				formControlName="newPassword"
				placeholder="Новый пароль"
				[errorStateMatcher]="errorMatcher"
				(focusin)="trigger.openPopover()"
				(focusout)="trigger.closePopover()"
			></do-password>
			<mat-error>{{ form.controls['newPassword'].errors | controlErrors }}</mat-error>
		</mat-form-field>
	</do-form-field>
	<do-form-field label="Повтори новый пароль">
		<mat-form-field>
			<do-password
				formControlName="confirmPassword"
				placeholder="Новый пароль"
				[errorStateMatcher]="errorMatcher"
			></do-password>
			<mat-error>{{ form.controls['confirmPassword'].errors | controlErrors }}</mat-error>
		</mat-form-field>
	</do-form-field>
	<do-actions class="actions">
		<button
			mat-flat-button
			color="primary"
			type="submit"
			[loading]="loadingState.loading$ | async"
			[disabled]="form.invalid"
		>
			Сменить пароль
		</button>
	</do-actions>
</form>
<mde-popover #popover="mdePopover" [mdePopoverOverlapTrigger]="false">
	<do-validation-hint [validations]="hintValidations$ | async"></do-validation-hint>
</mde-popover>
