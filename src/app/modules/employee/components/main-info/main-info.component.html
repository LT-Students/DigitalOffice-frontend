<div class="employee-info">
	<ng-container *ngIf="user$ | async as user">
		<div class="employee-info__wrapper">
			<ng-container *ngIf="!canEdit() || !isEditing">
				<!-- ; else editForm -->
				<div class="employee-info__main">
					<div class="employee-info__avatar">
						<do-profile-image [image]="user?.avatar" size="l"></do-profile-image>
						<label class="mat-body-1 employee-info__upload-button" (click)="onAvatarUploadDialog()">
							<mat-icon class="employee-info__upload-icon">
								<img src="../../../../../assets/svg/arrow-upload-file.svg" alt="Upload photo" />
							</mat-icon>
							Обновить фото
						</label>
					</div>
					<h3 class="employee-info__name">
						{{ user | fullName }}&nbsp;<span
							matTooltipClass="tooltip"
							[matTooltip]="user.firstName + ' ' + (user.status | lowercase)"
							[matTooltipPosition]="'above'"
							>{{ user.status }}</span
						>
					</h3>
					<q *ngIf="user?.about" class="mat-body-1 employee-info__about">{{ user?.about }}</q>
				</div>
				<div class="employee-info__general">
					<div class="employee-info__general-header">
						<h4>Общие сведения</h4>
						<div class="employee-info__edit-button">
							<p class="mat-body-2 light-gray-text">Редактировать профиль</p>
							<button mat-icon-button (click)="toggleEditMode(user)">
								<img src="../../../../../assets/svg/edit.svg" alt="edit_info" />
							</button>
						</div>
					</div>

					<div class="employee-info__columns">
						<div class="employee-info__first-column">
							<div>
								<p class="mat-caption">Гендер</p>
								<p>{{ user.genderName }}</p>
							</div>
							<div>
								<p class="mat-caption">Дата рождения</p>
								<p>{{ user.dateOfBirth | date: dateType.FULL }}</p>
							</div>
						</div>
						<div class="employee-info__second-column">
							<div>
								<!-- *ngIf="user?.latitude && user?.longitude" -->
								<p class="mat-caption">Местоположение</p>
								<p>{{ user.latitude }} {{ user.longitude }}</p>
							</div>
							<div>
								<p class="mat-caption">Часы работы</p>
								<p>{{ user.businessHoursFromUtc }}</p>
							</div>
						</div>
					</div>

					<div class="employee-info__general-header">
						<h4>Рабочая информация</h4>
					</div>

					<div class="employee-info__columns">
						<div class="employee-info__first-column">
							<div>
								<!-- *ngIf="user?.department" -->
								<p class="mat-caption">Департамент</p>
								<p>{{ user.department?.name }}</p>
							</div>
							<div>
								<!-- *ngIf="user?.position" -->
								<p class="mat-caption">Должность</p>
								<p>{{ user?.position?.name }}</p>
							</div>
							<div>
								<p class="mat-caption">В компании с</p>
								<!--                                <p>{{ user.startWorkingAt | date: dateType.FULL }}</p>-->
							</div>
						</div>
						<div class="employee-info__second-column">
							<div>
								<!-- *ngIf="user?.office?.city" -->
								<p class="mat-caption">Офис</p>
								<p>{{ user?.office?.city }}, {{ user?.office?.address }}</p>
							</div>
							<div>
								<!-- *ngIf="user?.role?.name" -->
								<p class="mat-caption">Роль</p>
								<p>{{ user?.role?.name }}</p>
							</div>

							<div>
								<!-- *ngIf="user?.rate" -->
								<p class="mat-caption">Ставка</p>
								<!--                            <p>{{ user?.rate }}</p>-->
							</div>
						</div>
					</div>
				</div>
			</ng-container>
			<div class="employee-info__additional">
				<do-communications class="employee-info__communications"></do-communications>
			</div>
		</div>
	</ng-container>
</div>
