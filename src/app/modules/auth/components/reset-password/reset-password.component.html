<form class="form" [formGroup]="resetForm" (ngSubmit)="resetPassword()" autocomplete="off">
	<span *ngIf="resetForm.controls['email']?.errors?.['reset']" class="mat-caption warn"
		>Неверный логин или секрет :(</span
	>
	<span *ngIf="resetForm.controls['email']?.errors?.['noMatch']" class="mat-caption warn"
		>Пароли не совпадают :(</span
	>
	<ng-container *ngIf="(isCompleted$$ | async) === false; else completed">
		<mat-form-field appearance="standard" class="form__input-field">
			<input matInput type="text" placeholder="Логин" formControlName="login" autocomplete="off" />
		</mat-form-field>
		<mat-form-field appearance="standard" class="form__input-field">
			<do-password placeholder="Пароль" formControlName="password"></do-password>
		</mat-form-field>
		<mat-form-field appearance="standard" class="form__input-field">
			<do-password placeholder="Повторите пароль" formControlName="repeatPassword"></do-password>
		</mat-form-field>
		<mat-form-field appearance="standard" class="form__input-field">
			<input matInput type="text" placeholder="Секрет" formControlName="secret" autocomplete="off" />
		</mat-form-field>
		<button
			[loading]="(isLoading$$ | async) ?? false"
			mat-flat-button
			class="form__submit"
			type="submit"
			color="primary"
			[disabled]="resetForm.invalid"
		>
			Сменить пароль
		</button>
	</ng-container>
	<ng-template #completed>
		<div class="mat-body-1 form__description text-align_center">Пароль был успешно изменён.</div>
		<button mat-flat-button color="primary" class="form__submit submit" type="button" routerLink="/auth/login">
			Войти
		</button>
	</ng-template>
</form>
